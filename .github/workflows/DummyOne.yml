on:
  workflow_dispatch:

jobs:
  manually_triggered_api_tests:
    if: github.event_name == 'workflow_dispatch'
    runs-on: ubuntu-latest
    steps:
        - name: Checkout base code
          uses: actions/checkout@v2
          with:
            path: base-code
        - name: Checkout wiki code
          uses: actions/checkout@v2
          with:
            repository: ${{github.repository}}.wiki
            path: markdown
        - name: Push to wiki
          run: |
            ls *
            cat ./markdown/home.json.textile > hello.json
            cat hello.json
            echo "{'a': 'b'}" >> hello.json
            cat hello.json > ./markdown/home.json.textile
            cd markdown
            git config --local user.email "action@github.com"
            git config --local user.name "GitHub Action"
            git add .
            git diff-index --quiet HEAD || git commit -m "Add changes" && git push
        
